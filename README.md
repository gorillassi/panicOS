# üß® panicOS

> _A cursed 32-bit x86 OS booting from raw iron. Terminal only. No userspace. Just you and the kernel._

---

## üí° –û–ø–∏—Å–∞–Ω–∏–µ

**panicOS** ‚Äî –º–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å –Ω—É–ª—è –Ω–∞ –∞—Å—Å–µ–º–±–ª–µ—Ä–µ –∏ C –¥–ª—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã x86.  
–°–æ–∑–¥–∞–Ω–∞ –∫–∞–∫ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç –≤ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–∏ —è–¥—Ä–∞ —Å —Ç–µ–∫—Å—Ç–æ–≤—ã–º –≤—ã–≤–æ–¥–æ–º, –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ –∏ –±–∞–∑–æ–≤—ã–º ELF-–∑–∞–≥—Ä—É–∑—á–∏–∫–æ–º.

---

## ‚öôÔ∏è –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–¢–µ–∫—Å—Ç–æ–≤—ã–π VGA-–¥—Ä–∞–π–≤–µ—Ä**
  - –ü–µ—á–∞—Ç—å —Ç–µ–∫—Å—Ç–∞ –Ω–∞–ø—Ä—è–º—É—é –≤ –≤–∏–¥–µ–æ–ø–∞–º—è—Ç—å.
  - –ü—Ä–æ–∫—Ä—É—Ç–∫–∞ —ç–∫—Ä–∞–Ω–∞ –ø—Ä–∏ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–∏.
  - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∫—É—Ä—Å–æ—Ä–∞.

- **–°–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –∑–∞–≥—Ä—É–∑—á–∏–∫ (MBR + bootmain.c)**
  - –í–∫–ª—é—á–∞–µ—Ç A20.
  - –ü–µ—Ä–µ—Ö–æ–¥ –≤ protected mode.
  - –ó–∞–≥—Ä—É–∑–∫–∞ —è–¥—Ä–∞ –∏–∑ ELF-–æ–±—Ä–∞–∑–∞ —Å –¥–∏—Å–∫–∞.
  - –ü–µ—Ä–µ–¥–∞—á–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ `kernel_main()`.

- **–Ø–¥—Ä–æ**
  - 32-–±–∏—Ç–Ω—ã–π —Ä–µ–∂–∏–º.
  - –í—ã–∑–æ–≤ `console_write`, `printk`, `panic`.
  - –ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ —ç–∫—Ä–∞–Ω–∞.
  - –ê–≤–∞—Ä–∏–π–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∏ `panic()`.

- **UART-–≤—ã–≤–æ–¥**
  - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ–≥–æ –∫–æ–Ω—Å–æ–ª—å–Ω–æ–≥–æ –≤—ã–≤–æ–¥–∞ –ø–æ COM-–ø–æ—Ä—Ç—É.
  - –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å –æ—Ç–ª–∞–¥—á–∏–∫–∞–º–∏.

---

## üöÄ –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫

```sh
make panicOS.img      # —Å–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞
make run              # –∑–∞–ø—É—Å–∫ –≤ QEMU
make run-nox          # –∑–∞–ø—É—Å–∫ –≤ headless-—Ä–µ–∂–∏–º–µ
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```sh
make test             # —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –≤—ã–≤–æ–¥–∞ —Å —ç—Ç–∞–ª–æ–Ω–æ–º
```

---

## üêõ –û—Ç–ª–∞–¥–∫–∞ (GDB)

```sh
make debug            # –æ—Ç–ª–∞–¥–∫–∞ —è–¥—Ä–∞
make debug-boot       # –æ—Ç–ª–∞–¥–∫–∞ –∑–∞–≥—Ä—É–∑—á–∏–∫–∞ (mbr)
```

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞

```
panicOS/
‚îú‚îÄ‚îÄ boot/                 # –ó–∞–≥—Ä—É–∑—á–∏–∫ (—Ä–µ–∞–ª—å–Ω—ã–π —Ä–µ–∂–∏–º, –∑–∞–≥—Ä—É–∑–∫–∞ ELF)
‚îÇ   ‚îú‚îÄ‚îÄ mbr.S             # MBR, –ø–µ—Ä–µ—Ö–æ–¥ –≤ protected mode
‚îÇ   ‚îî‚îÄ‚îÄ bootmain.c        # –ó–∞–≥—Ä—É–∑–∫–∞ —è–¥—Ä–∞ —Å –¥–∏—Å–∫–∞

‚îú‚îÄ‚îÄ kernel/               # –Ø–¥—Ä–æ (C, 32-bit)
‚îÇ   ‚îú‚îÄ‚îÄ kernel.c          # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ —è–¥—Ä–∞
‚îÇ   ‚îú‚îÄ‚îÄ console.c         # –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø–µ—á–∞—Ç–∏
‚îÇ   ‚îú‚îÄ‚îÄ console.h
‚îÇ   ‚îî‚îÄ‚îÄ syscall.c (–æ–ø—Ü.)  # –°–∏—Å—Ç–µ–º–Ω—ã–µ –≤—ã–∑–æ–≤—ã (–≤ –±—É–¥—É—â–µ–º)

‚îú‚îÄ‚îÄ drivers/              # –£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
‚îÇ   ‚îú‚îÄ‚îÄ vga.c/.h          # VGA-—Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º
‚îÇ   ‚îú‚îÄ‚îÄ uart.c/.h         # –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π –ø–æ—Ä—Ç
‚îÇ   ‚îî‚îÄ‚îÄ keyboard.c/.h     # –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ (–≤ –±—É–¥—É—â–µ–º)

‚îú‚îÄ‚îÄ include/              # –û–±—â–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏
‚îÇ   ‚îî‚îÄ‚îÄ elf.h             # –°—Ç—Ä—É–∫—Ç—É—Ä–∞ ELF

‚îú‚îÄ‚îÄ tools/                # –°–ª—É–∂–µ–±–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ mbrpad.c
‚îÇ   ‚îî‚îÄ‚îÄ mkfs.c

‚îú‚îÄ‚îÄ Makefile              # –°–±–æ—Ä–∫–∞ –≤—Å–µ–π —Å–∏—Å—Ç–µ–º—ã
‚îú‚îÄ‚îÄ panicOS.img           # –§–∏–Ω–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–∑ (—Ä–µ–∑—É–ª—å—Ç–∞—Ç)
‚îî‚îÄ‚îÄ README.md             # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

```

---

## üõ† –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å panicOS

### ‚úÖ –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- `gcc`, `make`, `ld`, `nasm` ‚Äî –¥–ª—è —Å–±–æ—Ä–∫–∏;
- `qemu-system-i386` ‚Äî –¥–ª—è —ç–º—É–ª—è—Ü–∏–∏;
- –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: `gdb` ‚Äî –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏.

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–∞ Linux (Debian/Ubuntu):

```sh
sudo apt install build-essential qemu-system-x86 gdb
```

---

### ‚ñ∂Ô∏è –ó–∞–ø—É—Å–∫

```sh
make panicOS.img      # —Å–æ–±—Ä–∞—Ç—å –æ–±—Ä–∞–∑
make run              # –∑–∞–ø—É—Å—Ç–∏—Ç—å –≤ QEMU
```

–í—ã —É–≤–∏–¥–∏—Ç–µ —Ñ–∏—Ä–º–µ–Ω–Ω—ã–π –∑–∞–≥—Ä—É–∑–æ—á–Ω—ã–π –±–∞–Ω–Ω–µ—Ä:

```
>> panicOS bootloader initializing...
:: panicOS ::
system integrity: COMPROMISED
boot sequence: chaotic
welcome, rootless entity
```

---

### üí¨ –†–∞–±–æ—Ç–∞ —Å —Å–∏—Å—Ç–µ–º–æ–π

- –°–∏—Å—Ç–µ–º–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∏ –ø–µ—á–∞—Ç–∞–µ—Ç –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ.
- –í—ã–≤–æ–¥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è —á–µ—Ä–µ–∑ VGA –∏ UART –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ.
- –ù–∞–±–æ—Ä–∞ –∫–æ–º–∞–Ω–¥ –Ω–µ—Ç ‚Äî —ç—Ç–æ —è–¥—Ä–æ, –Ω–µ userspace.
- –î–ª—è –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø–æ–≤–µ–¥–µ–Ω–∏—è ‚Äî —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `kernel.c`, –ø–µ—Ä–µ—Å–æ–±–∏—Ä–∞—Ç–µ.

